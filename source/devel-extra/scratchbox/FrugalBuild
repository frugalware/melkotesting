# Compiling Time: 0.01 SBU
# Maintainer: Miklos Vajna <vmiklos@frugalware.org>

pkgname=scratchbox
pkgver=1.0.17
pkgrel=1
pkgdesc="A cross-compilation toolkit to make embedded application development easier."
url="http://www.scratchbox.org/"
depends=('glibc')
groups=('devel-extra')
archs=('i686' '!x86_64')
up2date="lynx -dump http://scratchbox.org/download/files/sbox-releases/apophis/src/|Flasttar"
source=(http://scratchbox.org/download/files/sbox-releases/apophis/tarball/scratchbox-core-$pkgver-i386.tar.gz \
	http://scratchbox.org/download/files/sbox-releases/apophis/tarball/scratchbox-libs-$pkgver-i386.tar.gz \
	README.Frugalware rc.$pkgname $pkgname.service)
sha1sums=('4adbf025a29ee3d467e36a9801e1ae548bd1782b' \
          '53c4eff97cdcca9a2c591f023796c59d3673b8ab' \
          'a0086f8313df94ea766d86c9e983d05b02f023b7' \
          '7f17d4a73c673e58d736f3363ae732c63870d301' \
          '8fbdc00f075f1a6b9fe513a54c6fb6355757bd7c')
_F_cd_path='.'
options=('nostrip') # why wasting our time with this if it's already done?
_F_systemd_scriptlet="$pkgname.install"
_F_sysvinit_units=($pkgname)
_F_systemd_units=($pkgname=)
Finclude systemd

build()
{
	Fmkdir /usr/lib
	cp -pPR scratchbox $Fdestdir/usr/lib/
	Fln usr/lib/scratchbox scratchbox
	# fix broken symlink
	Fln /usr/bin/iconv /usr/lib/scratchbox/compilers/bin/iconv
	# no Frcd2 here as no i18n
	Fexe /etc/rc.d/rc.scratchbox
	Fdoc README.Frugalware
	Ffile /lib/systemd/system/$pkgname.service
	Fgenscriptlet
}
