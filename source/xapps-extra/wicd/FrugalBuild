# Compiling time: 0 SBU
# Maintainer: bouleetbil <bouleetbil@frogdev.info>

pkgname=wicd
pkgver=1.7.0
pkgrel=7
pkgdesc="A wired and wireless network manager for Linux"
depends=('pygtk')
groups=('xapps-extra')
archs=('i686' 'x86_64' 'ppc')
options=('scriptlet' 'force')
rodepends=("wicd-cli" "wicd-daemon")
_F_gnome_iconcache="y"
_F_gnome_desktop="y"
_F_sourceforge_realname="wicd-stable"
Finclude sourceforge gnome-scriptlet
source=($source wicd.service deopcopy.diff)
sha1sums=('76d9c0ad7b020ff1abac5c92c301739a04d5595e' \
          '562a7e444ca8b2ca01bf1b8c92483398edf25333' \
          '90c81ca12ef5cf7ebca6fed700af45a3af226645')

subpkgs=('wicd-cli')
subdescs=('Curses client for wicd')
subdepends=('urwid')
subrodepends=('wicd-daemon')
subinstall=('')
subgroups=('apps-extra')
subarchs=('i686 x86_64 ppc')

subpkgs=("${subpkgs[@]}" 'wicd-daemon')
subdescs=("${subdescs[@]}" 'wicd daemon')
subdepends=("${subdepends[@]}" "dbus-python dhcp dhcpcd wireless_tools wpa_supplicant\
	ethtool python>=2.7 urwid python-wpactrl python-iwscan")
subrodepends=("${subrodepends[@]}" '')
subinstall=("${subinstall[@]}" 'wicd.install')
subgroups=("${subgroups[@]}" 'network-extra')
subarchs=("${subarchs[@]}" 'i686 x86_64 ppc')

build() {
	Fcd
	Fpatchall
	python ./setup.py configure --no-install-init --no-install-docs --resume=/usr/share/wicd/scripts/ --suspend=/usr/share/wicd/scripts/ --verbose || Fdie
	python ./setup.py build || Fdie
	Fmakeinstall
	Fmkdir lib/systemd/system/
	Finstall 0644 wicd.service /lib/systemd/system/wicd.service
	Fbuild_gnome_scriptlet

	Fsplit wicd-cli usr/share/wicd/curses
	Fsplit wicd-cli usr/share/man/man8/wicd-curses*
	Fsplit wicd-cli usr/bin/wicd-curses

	Fsplit wicd-daemon usr/bin/wicd-cli
	Fsplit wicd-daemon usr/bin/wicd-client
	Fsplit wicd-daemon usr/sbin/wicd
	Fsplit wicd-daemon usr/lib/
	Fsplit wicd-daemon var
	Fsplit wicd-daemon lib
	Fsplit wicd-daemon usr/share/wicd/scripts
	Fsplit wicd-daemon usr/share/wicd/daemon
	Fsplit wicd-daemon usr/share/wicd/backends
	Fsplit wicd-daemon usr/share/wicd/cli
	Fsplit wicd-daemon etc/wicd
	Fsplit wicd-daemon etc/dbus-1
	Fsplit wicd-daemon usr/share/man/man1/wicd-client.1*
	Fsplit wicd-daemon usr/share/man/man5/wicd-manager-settings.conf.5*
	Fsplit wicd-daemon usr/share/man/man5/wicd-wired-settings.conf.5*
	Fsplit wicd-daemon usr/share/man/man5/wicd-wireless-settings.conf.5*
	Fsplit wicd-daemon usr/share/man/man8/wicd-cli.8*
	Fsplit wicd-daemon usr/share/man/man8/wicd.8*

}
